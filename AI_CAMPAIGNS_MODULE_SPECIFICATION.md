# AI Campaigns Module Specification

## Module Overview

**AI Campaigns** empower Customer or Agency Admins to launch targeted, goal-oriented AI-driven initiatives. Unlike the automated Moments Engine, which fires based on system rules and milestones, Campaigns are **human-initiated**, strategic AI interactions meant to drive outcomes, collect feedback, boost morale, or support targeted individuals or teams.

---

## Core Use Cases

| Campaign Name                      | Target           | Objective                                  |
|-----------------------------------|------------------|--------------------------------------------|
| Finish Q3 Strong                  | Sales Team       | Motivate and align toward quarterly goals  |
| What Do You Think of the New PTO Policy? | Company-wide    | Gather honest, real-time employee sentiment |
| Bring the Energy!                | Warehouse Staff  | Boost morale during summer lull            |
| Support for Jessica              | Individual Worker | AI-delivered support after low scores      |
| Mental Health Month              | Company-wide     | Weekly check-ins, nudges, and reflections  |

---

## Key Differences: Campaigns vs. Moments vs. Broadcasts

| Feature                   | Moments Engine                        | AI Campaigns                              | Broadcasts                                |
|--------------------------|---------------------------------------|-------------------------------------------|-------------------------------------------|
| Initiation               | System/automated                      | Admin-initiated                           | Admin-initiated                           |
| Trigger Type             | Time-based, behavior/event-based      | Manual or scheduled by admin              | Manual or scheduled                       |
| Audience                 | System-eligible cohorts               | Any custom group or individual(s)         | Filtered audience                         |
| Scope                    | 1 moment = 1 message or check-in      | Campaign = series or multi-step initiative| 1-time message                            |
| Engagement               | Automatic opt-in                      | Opt-in or admin-forced depending on design| One-way communication                     |
| Use Case                 | Routine check-ins, health scans       | Morale drives, feedback loops, live coaching | Announcements, updates, notifications |
| Reporting                | Trait change, retention risk          | Custom metrics tied to campaign objective | Read rates, reply rates                   |
| AI Behavior              | Reactive to triggers                  | Proactive, goal-driven                    | Static message delivery                   |

---

## Admin UI Specification

### Navigation
- Accessible from the Launchpad home
- Button: **"AI Campaigns"**
- Sections: All Campaigns, Active, Drafts, Completed, Analytics

---

### Campaign Creation Flow

#### Step 1: Basic Info
- **Campaign Title**
- **Objective/Purpose** (Free text or selected from common goals: e.g. "Drive Engagement," "Get Feedback," "Improve Morale")
- **Category** (morale, feedback, sales, policy, support, wellness)

#### Step 2: Targeting
- **Audience**
  - Entire company
  - Selected Locations
  - Selected Departments
  - Selected Individuals
  - User Groups
  - Job Orders
- **AI Tone**:
  - Motivational
  - Survey
  - Coaching
  - Feedback-Seeking
  - Empathetic
  - Directive

#### Step 3: Timeline & Delivery
- **Start Date**
- **Frequency Options**:
  - One-time message
  - Recurring (daily, weekly, custom)
  - Multi-touch Campaign (series of messages)
- **Follow-up Options**:
  - 1 follow-up if no response
  - Continuous (until opt-out or marked complete)
  - AI-paced (based on engagement)

#### Step 4: Prompts & AI Behavior
- Custom prompts defined by admin OR generated by AI with admin review
- Can select from a template bank (motivational, policy check-in, goal-setting, etc.)
- AI response patterns and escalation rules

---

## Firestore Data Structure

### `/campaigns/{campaignId}`

```json
{
  "campaignId": "auto-generated",
  "tenantId": "tenant_abc123",
  "title": "Bring the Energy!",
  "objective": "Boost morale for summer warehouse staff",
  "category": "morale",
  "tone": "motivational",
  "promptTemplates": ["Let's bring the energy this week!", "What's one thing you're proud of this shift?"],
  "targetAudience": {
    "locationIds": ["loc_vegas", "loc_dallas"],
    "departmentIds": ["warehouse_ops"],
    "userIds": [],
    "userGroupIds": [],
    "jobOrderIds": []
  },
  "startDate": "2025-07-12T08:00:00Z",
  "frequency": "weekly",
  "status": "active",
  "creatorUserId": "admin_123",
  "createdAt": "2025-07-09T18:00:00Z",
  "followUpStrategy": "1_followup",
  "tags": ["morale", "retention", "engagement"],
  "aiBehavior": {
    "responsePattern": "encouraging",
    "escalationThreshold": 0.3,
    "escalationEmail": "hr@company.com",
    "traitTracking": ["motivation", "burnout_risk", "engagement"]
  },
  "analytics": {
    "totalRecipients": 45,
    "responsesReceived": 23,
    "avgEngagementScore": 0.78,
    "traitChanges": {
      "motivation": 0.12,
      "burnout_risk": -0.07
    }
  }
}
```

### `/campaign_responses/{campaignId}_{userId}`

```json
{
  "campaignId": "campaign_123",
  "userId": "user_456",
  "responses": [
    {
      "timestamp": "2025-07-13T09:00:00Z",
      "text": "I feel really energized today. Appreciate the boost!",
      "sentiment": "positive",
      "aiResponse": "That's fantastic! Keep that energy flowing...",
      "escalated": false
    }
  ],
  "engagementScore": 0.92,
  "traitChanges": {
    "motivation": 0.12,
    "burnout_risk": -0.07
  },
  "completed": true,
  "lastInteraction": "2025-07-13T09:00:00Z"
}
```

### `/campaign_schedules/{campaignId}`

```json
{
  "campaignId": "campaign_123",
  "scheduledInteractions": [
    {
      "userId": "user_456",
      "scheduledFor": "2025-07-15T10:00:00Z",
      "status": "pending",
      "interactionType": "followup",
      "promptTemplate": "How are you feeling about the energy boost campaign?"
    }
  ],
  "nextBatch": "2025-07-16T08:00:00Z"
}
```

---

## AI Behavior Integration

### Engine Processing
The CampaignsEngine integrates with your existing AI engine ecosystem:

```typescript
// In aiEngineProcessor.ts
case 'CampaignsEngine':
  return await processWithCampaignsEngine(logData, logId);
```

### AI Behavior Patterns
- **Response Generation**: Uses ContextEngine + ToneEngine for consistent messaging
- **Trait Tracking**: Integrates with TraitsEngine for engagement measurement
- **Escalation Logic**: Uses PriorityEngine for risk assessment
- **Follow-up Scheduling**: Integrates with Scheduler for timing

---

## Analytics & Reporting

### Overview Dashboard (Campaign-Level)
- Title, Status, Audience Size
- Responses Received, Average Sentiment Score
- Engagement Graph (daily/weekly)
- Trait Change Overview

### Detailed Views
- Per-user response logs
- Trait delta tracking
- Engagement heatmaps (by location, team)
- Completion Rates

### Integration with Existing Analytics
- Leverages existing trait tracking system
- Integrates with Logs module for comprehensive audit trail
- Uses existing analytics infrastructure

---

## Permissions & Access Control

| Role | Actions |
|------|---------|
| HRX Admin | Create/Edit/Delete Campaigns across tenants |
| Agency Admin | Full access to Campaigns they initiate |
| Customer Admin | Create/Edit within their own company context |
| Managers | View campaign results for their teams |
| Workers | Respond to campaigns in Companion app |

---

## Integration with Companion App

- AI Campaign messages show up under Home Feed with campaign labels
- Campaign messages may be pinned or marked as priority if required
- Worker responses are automatically logged
- Workers can revisit past campaign messages from the History tab

---

## Implementation Phases

### Phase 1: Core Infrastructure
1. Create CampaignsEngine module
2. Implement Firestore schema
3. Add to AI Launchpad navigation
4. Basic campaign creation UI

### Phase 2: AI Integration
1. Integrate with existing AI engines
2. Implement response processing
3. Add trait tracking
4. Basic analytics

### Phase 3: Advanced Features
1. Multi-touch campaigns
2. Advanced targeting
3. Template library
4. Comprehensive analytics

### Phase 4: Optimization
1. AI-suggested campaigns
2. A/B testing
3. Performance optimization
4. Advanced reporting

---

## Summary

The AI Campaigns Module bridges the gap between passive, system-led engagement (Moments) and one-time announcements (Broadcasts). It allows any organization to drive morale, collect real-time feedback, and align workers with goalsâ€”at scale, with AI-powered personalization and full analytics.

This module should be treated as a core system-level Launchpad module with full lifecycle support: campaign creation, targeting, message delivery, AI behavior, response logging, trait tracking, and admin reporting. 